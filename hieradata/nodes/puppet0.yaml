---
classes:
  - '::puppet::master::apache'

puppet::ssl: false

puppet::conf:
  main:
    logdir: '/var/lib/puppet'
    vardir: '/var/lib/puppet'
    ssldir: '/var/lib/puppet/ssl'
    rundir: '/var/run/puppet'
    reports: 'foreman'
  master:
    ca: 'false'
    environmentpath: '$confdir/environments'
    storeconfigs: 'true'
    storeconfigs_backend: 'puppetdb'
    node_terminus: 'exec'
    external_nodes: '/etc/puppet/node.rb'

puppet::hiera:
  backends:
    - 'eyaml'
    - 'yaml'
  yaml:
    datadir: '"/etc/puppet/environments/%%{}{environment}/hieradata"'
  eyaml:
    extension: 'yaml'
    datadir: '"/etc/puppet/environments/%%{}{environment}/hieradata"'
    pkcs7_private_key: '/etc/puppet/keys/private_key.pkcs7.pem'
    pkcs7_public_key: '/etc/puppet/keys/public_key.pkcs7.pem'
  merge_behavior: 'deeper'
  hierarchy:
    - '"nodes/%%{}{hostname}"'
    - '"platforms/%%{}{productname}"'
    - '"%%{}{virtual}/architectures/%%{}{architecture}"'
    - '"environments/%%{}{environment}/roles/%%{}{role}"'
    - '"roles/%%{}{role}"'
    - '"releases/%%{}{lsbdistcodename}/%%{}{architecture}/%%{}{calling_module}"'
    - '"releases/%%{}{lsbdistcodename}"'
    - '"osfamilies/%%{}{osfamily}"'
    - '"%%{}{environment}"'
    - '"environments/%%{}{environment}/modules/%%{}{calling_module}"'
    - '"domains/%%{}{domain}"'
    - '"domains/%%{}{domain}/modules/%%{}{calling_module}"'
    - '"modules/%%{}{calling_module}"'
    - 'common'
