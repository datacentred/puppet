---
glance::keystone::auth::auth_name: 'glance'
glance::keystone::auth::email: "%{hiera('internal_sysmail_address')}"
glance::keystone::auth::tenant: "%{hiera('os_service_tenant')}"
glance::keystone::auth::region: "%{hiera('os_region')}"
glance::keystone::auth::public_url: "https://%{hiera('os_api_host')}:9292"
glance::keystone::auth::admin_url: "https://%{hiera('os_api_host')}:9292"
glance::keystone::auth::internal_url: "https://%{hiera('os_api_host')}:9292"

glance::api::registry_host: "%{hiera('os_api_host')}"
glance::api::auth_host: "%{hiera('os_api_host')}"
glance::api::registry_client_protocol:  'https'
glance::api::auth_protocol: 'https'
glance::api::auth_type: 'keystone'
glance::api::auth_uri: "https://%{hiera('os_api_host')}:5000/v2.0"
glance::api::keystone_tenant: 'services'
glance::api::keystone_user: 'glance'
glance::api::keystone_password: "%{hiera('keystone_glance_password')}"
glance::api::database_connection: "mysql://%{hiera('glance_db_user')}:%{hiera('glance_db_pass')}@%{hiera('os_api_host')}:3306/%{hiera('glance_db')}"
glance::api::use_syslog: false
glance::api::enabled: true
glance::api::show_image_direct_url: true
glance::api::known_stores:
    - glance.store.rbd.Store
    - glance.store.http.Store
glance::api::debug: true
glance::api::verbose: true

glance::registry::auth_type: 'keystone'
glance::registry::auth_host: "%{hiera('os_api_host')}"
glance::registry::auth_uri: "https://%{hiera('os_api_host')}:5000/v2.0"
glance::registry::auth_protocol: 'https'
glance::registry::keystone_tenant: 'services'
glance::registry::keystone_user: 'glance'
glance::registry::keystone_password: "%{hiera('keystone_glance_password')}"
glance::registry::database_connection: "mysql://%{hiera('glance_db_user')}:%{hiera('glance_db_pass')}@%{hiera('os_api_host')}:3306/%{hiera('glance_db')}"
glance::registry::use_syslog: false
glance::registry::enabled: true
glance::registry::debug: 'true'
glance::registry::verbose: 'true'

glance::backend::rbd::rbd_store_ceph_conf: '/etc/ceph/ceph.conf'
glance::backend::rbd::rbd_store_user: 'glance'
glance::backend::rbd::rbd_store_pool: 'glance'
glance::backend::rbd::package_ensure: 'present'
glance::notify::rabbitmq::rabbit_hosts:
 - osdbmq0.%{::domain}
 - osdbmq1.%{::domain}
 - osdbmq2.%{::domain}
glance::notify::rabbitmq::rabbit_port: "%{hiera('osdbmq_rabbitmq_port')}"
glance::notify::rabbitmq::rabbit_userid: "%{hiera('osdbmq_rabbitmq_user')}"
glance::notify::rabbitmq::rabbit_password: "%{hiera('osdbmq_rabbitmq_pw')}"
glance::notify::rabbitmq::rabbit_virtual_host: "%{hiera('osdbmq_rabbitmq_vhost')}"

glance::cache::pruner::command_options: '>> /var/log/glance/glance-cache-pruner.log 2>&1'
glance::cache::cleaner::command_options: '>> /var/log/glance/glance-cache-cleaner.log 2>&1'

glance::policy::policies:
  glance-context_is_admin:
    key: 'context_is_admin'
    value: 'role:admin'
  glance-publicize_image:
    key: 'publicize_image'
    value: 'role:admin'
  glance-manage_image_cache:
    key: 'manage_image_cache'
    value: 'role:admin'
