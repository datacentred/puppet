title   "Disk inode usage for <%= @mount %> on <%= @_hostname %>"
vtitle "Inodes"
area    :stacked
hide_legend false
<%
  # Create our hostname string in a format that's consistent with what we're storing in Carbon
    # ༼ つ ◕_◕ ༽つ
  # Mounts come in from the title with underscores which need to be dashes
  mount_rename = @mount.gsub(/_/,'-')
  ghostname  = (@_hostname + "." + @domain).gsub(/\./, '_') 
  free = "collectd." + ghostname + ".df-" + mount_rename + ".df_inodes-free"
  reserved = "collectd." + ghostname + ".df-" + mount_rename + ".df_inodes-reserved"
  used = "collectd." + ghostname + ".df-" + mount_rename + ".df_inodes-used"
%>
field :used, :color => "yellow",
               :alias => "Used",
               :data  => "<%= used %>"

field :free, :color => "green",
               :alias => "Free",
               :data  => "diffSeries(<%= free %>, <%= reserved %>)"
               
field :reserved, :color => "red",
               :alias => "Reserved",
               :data  => "<%= reserved %>"

