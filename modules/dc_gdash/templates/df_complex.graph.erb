title   "Disk usage for <%= @mount %> on <%= @_hostname %>"
vtitle "Bytes"
area    :stacked
hide_legend false
<%
  # Create our hostname string in a format that's consistent with what we're storing in Carbon
    # ༼ つ ◕_◕ ༽つ
  mount_rename = @mount.gsub(/_/,'-')
  reversedomain = join(reverse(split(@domain, '.'),'.')
  ghostname  = reversedomain + "." + @_hostname
  free = "collectd." + ghostname + ".df-" + mount_rename + ".df_complex-free"
  reserved = "collectd." + ghostname + ".df-" + mount_rename + ".df_complex-reserved"
  used = "collectd." + ghostname + ".df-" + mount_rename + ".df_complex-used"
%>
field :used, :color => "yellow",
               :alias => "Used",
               :data  => "<%= used %>"

field :free, :color => "green",
               :alias => "Free",
               :data  => "diffSeries(<%= free %>, <%= reserved %>)"
               
field :reserved, :color => "red",
               :alias => "Reserved",
               :data  => "<%= reserved %>"
