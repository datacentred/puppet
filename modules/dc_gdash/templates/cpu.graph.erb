title   "CPU stats for <%= @cpu %> on <%= @_hostname %>"
vtitle "Percent"
area    :none
hide_legend false
<%
  # Create our hostname string in a format that's consistent with what we're storing in Carbon
    # ༼ つ ◕_◕ ༽つ
  ghostname  = "collectd." + @reversedomain + "." + @_hostname + "." + @cpu
  cpuidle = ghostname + ".cpu-idle"
  cpunice = ghostname + ".cpu-nice"
  cpusoftirq = ghostname + ".cpu-softirq"
  cpusteal = ghostname + ".cpu-steal"
  cpusystem = ghostname + ".cpu-system"
  cpuwait = ghostname + ".cpu-wait"
  cpuinterrupt = ghostname + ".cpu-interrupt"
  cpuuser = ghostname + ".cpu-user"
%>
field :idle, :color => "green",
               :alias => "Idle",
               :data  => "scaleToSeconds(nonNegativeDerivative(<%= cpuidle %>),1)"

field :nice, :color => "orange",
               :alias => "Nice",
               :data  => "scaleToSeconds(nonNegativeDerivative(<%= cpunice %>),1)"
               
field :user, :color => "blue",
               :alias => "User",
               :data  => "scaleToSeconds(nonNegativeDerivative(<%= cpuuser %>),1)"
               
field :wait, :color => "red",
               :alias => "Wait-IO",
               :data  => "scaleToSeconds(nonNegativeDerivative(<%= cpuwait %>),1)"

field :system, :color => "black",
               :alias => "System",
               :data  => "scaleToSeconds(nonNegativeDerivative(<%= cpusystem %>),1)"

field :softirq, :color => "pink",
               :alias => "SoftIRQ",
               :data  => "scaleToSeconds(nonNegativeDerivative(<%= cpusoftirq %>),1)"

field :interrupt, :color => "purple",
               :alias => "IRQ",
               :data  => "scaleToSeconds(nonNegativeDerivative(<%= cpuinterrupt %>),1)"

field :steal, :color => "grey",
               :alias => "Steal",
               :data  => "scaleToSeconds(nonNegativeDerivative(<%= cpusteal %>),1)"
