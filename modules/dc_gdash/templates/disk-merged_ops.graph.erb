title   "Merged OPs/s for <%= @disk %> on <%= @_hostname %>"
vtitle   "Merged OPs/s"
area    :first
hide_legend false
<%
  # Create our hostname string in a format that's consistent with what we're storing in Carbon
    # ༼ つ ◕_◕ ༽つ
  # Handle the naming in collectd for HP blade raid arrays
    if @disk =~ /^c0d0/
        ghostname  = "collectd." + @reversedomain + "." + @_hostname + ".disk.cciss_" + @disk + ".disk_merged"
    else
        ghostname  = "collectd." + @reversedomain + "." + @_hostname + ".disk." + @disk + ".disk_merged"
    end
    
    writes = ghostname + ".write"
    reads = ghostname + ".read"
%>
field :Written, :color => "green",
               :alias => "Merged Writes",
               :data  => "scaleToSeconds(nonNegativeDerivative(<%= writes %>),1)"

field :Read, :color => "blue",
               :alias => "Merged Reads",
               :data  => "scaleToSeconds(nonNegativeDerivative(<%= reads %>),1)"
