#!/usr/bin/env ruby

$stdin.each_line do |line|
  oldrev, newrev, refname = line.split(" ")
  branchname = refname.sub(%r{^refs/heads/(.*$)}) { $1 }
  if branchname == 'master'
    puts "[1;31m*** ACCESS DENIED ***[0m"
    exit 1
  end
end
